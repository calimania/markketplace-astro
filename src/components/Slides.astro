---
import { Fragment } from "react";

interface Slide {
  id: number;
  name: string;
  alternativeText: string | null;
  caption: string | null;
  width: number;
  height: number;
  url: string;
}

const { slides } = Astro.props;
---

<div class="relative mx-auto w-full max-w-4xl">
  <div class="flex space-x-4 overflow-x-scroll">
    {
      slides.map((slide: Slide) => (
        <Fragment>
          <div class="md:w-1/2 lg:w-1/3 w-full flex-shrink-0">
            <img
              src={slide.url}
              alt={slide.alternativeText || slide.name}
              width={slide.width}
              height={slide.height}
              class="rounded-lg object-cover shadow-lg cursor-pointer"
              onclick="openModal(this)"
            />
            {slide.caption && (
              <p class="mt-2 text-sm text-gray-600 dark:text-gray-300">
                {slide.caption}
              </p>
            )}
          </div>
        </Fragment>
      ))
    }
  </div>
</div>

<div id="modal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-75 hidden">
  <div class="relative bg-white dark:bg-gray-800 p-4 rounded-lg">
    <span class="absolute top-2 right-2 text-2xl cursor-pointer" onclick="closeModal()">&times;</span>
    <img id="modal-image" class="rounded-lg object-cover shadow-lg" />
  </div>
</div>

<script>
  function openModal(img) {
    const modal = document.getElementById('modal');
    const modalImage = document.getElementById('modal-image');
    modalImage.src = img.src;
    modal.classList.remove('hidden');
  }

  function closeModal() {
    const modal = document.getElementById('modal');
    modal.classList.add('hidden');
  }
</script>
